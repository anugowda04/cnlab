import java.net.*;
import java.util.*;
import java.io.*;

public class TCPServer{
	public static void main(String []args) throws Exception{
		ServerSocket sersoc = new ServerSocket(7777);
		System.out.println("Server Connected, Waiting for Client");
		Socket soc = sersoc.accept();
		System.out.println("Client Connection Established, Waiting for Filename");
		InputStream istream = soc.getInputStream();
		Scanner sc = new Scanner(istream);
		String fname = sc.nextLine();
		OutputStream ostream = soc.getOutputStream();
		PrintWriter pwrite = new PrintWriter(ostream,true);
		try{
			sc = new Scanner(new File(fname));
			while(sc.hasNextLine()){
				pwrite.println(sc.nextLine());
			}
		}
		catch(Exception e){
			pwrite.println("File Name does not Exist");
		}
		finally{
			System.out.println("Closing Connection");
		}
	}
}
====================================================
///client
import java.util.*;
import java.net.*;
import java.io.*;

public class TCPClient{
	public static void main(String [] args) throws Exception{
		Socket sock = new Socket("127.0.0.1",7777);
		Scanner sc = new Scanner(System.in);
		System.out.print("Enter Filename : ");
		String fname = sc.next();
		OutputStream ostream = sock.getOutputStream();
		PrintWriter pwrite = new PrintWriter(ostream,true);
		pwrite.println(fname);
		InputStream istream = sock.getInputStream();
		sc = new Scanner(istream);
		while(sc.hasNextLine()){
			System.out.println(sc.nextLine());
		}
	}
}
